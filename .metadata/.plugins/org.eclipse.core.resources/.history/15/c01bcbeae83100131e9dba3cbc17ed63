package Regle0;

import java.util.*;

public class Substitutions 
{
	private ArrayList<Term> constants;
	private ArrayList<Term> variables;
	private ArrayList<Substitution> substitutions;
	
	public Substitutions()
	{
		this.substitutions = new ArrayList<Substitution>();
		this.constants = new ArrayList<Term>();
		this.variables = new ArrayList<Term>();
	}
	
	public Substitutions(ArrayList<Term> terms)
	{
		this.substitutions = new ArrayList<Substitution>();
		this.constants = terms;
		this.variables = terms;
		
		for(Term v : variables)
		{
			if(!v.isVariable())
			{
				variables.remove(v);
			}
		}
		
		for(Term c : this.constants)
		{
			if(!c.isConstant())
			{
				this.constants.remove(c);
			}
		}
			
	}

	public ArrayList<Substitution> getSubstitutions() {
		return substitutions;
	}

	public void setSubstitutions(ArrayList<Substitution> substitutions) {
		this.substitutions = substitutions;
	}

	public ArrayList<Term> getTerms() {
		return constants;
	}

	public void setTerms(ArrayList<Term> terms) {
		this.constants = terms;
	}

	public ArrayList<Term> getVariables() {
		return variables;
	}

	public void setVariables(ArrayList<Term> variables) {
		this.variables = variables;
	}
	
	public void addSubstitution(Substitution s)
	{
		this.substitutions.add(s);
	}
	
	public void generateAllSubstitutions()
	{
		Substitution s = new Substitution();
		generateRec(s);
	}
	
	private void generateRec(Substitution s)
	{
		if (variables.isEmpty())
		{
			substitutions.add(s);
		}
		else
		{
			for(Term constant : constants)
			{
				Substitution s2 = new Substitution(s);
				CoupleTerms couple = new CoupleTerms(variables.get(0),constant);
				s2.addCouples(couple);
				
			}
		}
	}

}
